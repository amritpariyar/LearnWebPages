@{
	Page.Title = "Title goes here";
	Layout = "~/_SiteLayout.cshtml";

	//Add your code to connect to database here
	//First check the table is present in the database or not
	//Then fetch the records and display in the web page
	//If no table found, create the table first.

	var db = Database.Open("CollegeSite");
	// Create Students table if it doesn't exist
	var tableExists = db.QueryValue("SELECT COUNT(*) FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'Students'");

	if (tableExists == 0)
	{
		db.Execute(@"CREATE TABLE Students (
			StudentId INT IDENTITY(1,1) PRIMARY KEY,
			FirstName NVARCHAR(50) NOT NULL,
			LastName NVARCHAR(50) NOT NULL,
			Email NVARCHAR(100) NOT NULL,
			DateOfBirth DATETIME,
			Major NVARCHAR(100),
			EnrollmentDate DATETIME NOT NULL
		)");
		// Close the database connection
		db.Close();
	}
	else
	{
		// Fetch all student records
	}

	var students = db.Query("SELECT * FROM Students ORDER BY LastName, FirstName");

}
<div>
	@if (students.Any())
	{
		<table>
			<thead>
				<tr>
					<th>Student ID</th>
					<th>First Name</th>
					<th>Last Name</th>
					<th>Email</th>
					<th>Major</th>
					<th>Enrollment Date</th>
					<th>Actions</th>
				</tr>
			</thead>
			<tbody>
				@foreach (var student in students)
				{
					<tr>
						<td>@student.StudentId</td>
						<td>@student.FirstName</td>
						<td>@student.LastName</td>
						<td>@student.Email</td>
						<td>@student.Major</td>
						<td>@student.EnrollmentDate.ToString("MM/dd/yyyy")</td>
						<td>
							<a href="~/EditStudent.cshtml?id=@student.StudentId">Edit</a> |
							<a href="~/DeleteStudent.cshtml?id=@student.StudentId">Delete</a>
						</td>
					</tr>
				}
			</tbody>
		</table>
	}
	else
	{
		<p>No students found. <a href="~/AddStudent.cshtml">Add the new student</a></p>
	}
</div>