@{
	Page.Title = "Students List";
	Layout = "~/_SiteLayout.cshtml";

	//Add your code to connect to database here
	//First check the table is present in the database or not
	//Then fetch the records and display in the web page
	//If no table found, create the table first.

	var db = Database.Open("CollegeSite");
	// Create Students table if it doesn't exist
	var tableExists = db.QueryValue("SELECT COUNT(*) FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'Students'");

	if (tableExists == 0)
	{
		db.Execute(@"CREATE TABLE Students (
			StudentId INT IDENTITY(1,1) PRIMARY KEY,
			FirstName NVARCHAR(50) NOT NULL,
			LastName NVARCHAR(50) NOT NULL,
			Email NVARCHAR(100) NOT NULL,
			DateOfBirth DATETIME,
			Major NVARCHAR(100),
			EnrollmentDate DATETIME NOT NULL
		)");
	}

	var students = db.Query("SELECT * FROM Students ORDER BY LastName, FirstName");

}
<div>
	<h1>@Page.Title</h1>
	
	<p>
		<a href="~/AddStudent.cshtml" class="add-button">Add New Student</a>
	</p>
	
	@if (students.Any())
	{
		<table>
			<thead>
				<tr>
					<th>Student ID</th>
					<th>First Name</th>
					<th>Last Name</th>
					<th>Email</th>
					<th>Major</th>
					<th>Enrollment Date</th>
					<th>Actions</th>
				</tr>
			</thead>
			<tbody>
				@foreach (var student in students)
				{
					<tr>
						<td>@student.StudentId</td>
						<td>@student.FirstName</td>
						<td>@student.LastName</td>
						<td>@student.Email</td>
						<td>@student.Major</td>
						<td>@student.EnrollmentDate.ToString("MM/dd/yyyy")</td>
						<td>
							<a href="~/EditStudent.cshtml?id=@student.StudentId" class="edit-link">Edit</a> |
							<a href="~/DeleteStudent.cshtml?id=@student.StudentId" class="delete-link">Delete</a>
						</td>
					</tr>
				}
			</tbody>
		</table>
	}
	else
	{
		<p class="no-records">No students found. <a href="~/AddStudent.cshtml">Add the first student</a></p>
	}
</div>

<style>
	.add-button {
		display: inline-block;
		background-color: #4CAF50;
		color: white;
		padding: 10px 20px;
		text-decoration: none;
		border-radius: 4px;
		margin-bottom: 20px;
	}
	
	.add-button:hover {
		background-color: #45a049;
	}
	
	table {
		width: 100%;
		border-collapse: collapse;
		margin-top: 20px;
	}
	
	th, td {
		padding: 10px;
		text-align: left;
		border: 1px solid #ddd;
	}
	
	th {
		background-color: #4CAF50;
		color: white;
	}
	
	tr:nth-child(even) {
		background-color: #f2f2f2;
	}
	
	tr:hover {
		background-color: #ddd;
	}
	
	.edit-link {
		color: #007bff;
		text-decoration: none;
	}
	
	.edit-link:hover {
		text-decoration: underline;
	}
	
	.delete-link {
		color: #d9534f;
		text-decoration: none;
	}
	
	.delete-link:hover {
		text-decoration: underline;
	}
	
	.no-records {
		padding: 20px;
		background-color: #f9f9f9;
		border: 1px solid #ddd;
		border-radius: 4px;
		text-align: center;
	}
</style>